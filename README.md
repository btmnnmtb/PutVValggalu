# Kurshax — интернет-магазин косметики

Курсовой проект: веб-приложение интернет-магазина косметики на стекe **Spring Boot + Thymeleaf + PostgreSQL** с ролевой моделью доступа (администратор, менеджер, склад, пользователь).

---

## Технологии и зависимости

- Язык: **Java 17**
- Фреймворк: **Spring Boot 3.5.x**
- Сборщик: **Maven**
- База данных: **PostgreSQL**
- ORM: **Spring Data JPA / Hibernate**
- Безопасность: **Spring Security** (BCrypt для хеширования паролей)
- Шаблоны: **Thymeleaf**
- REST-API: контроллеры `*ApiController` для работы с корзиной, товарами, заказами, избранным и пользователями.

---

## Архитектура проекта

Приложение реализовано по классической трёхслойной архитектуре:

1. **Представление (UI / Web слой)**
   - Пакет: `com.example.demo.controller`
   - Ответственность:
     - Отображение страниц (Thymeleaf-шаблоны)
     - REST-эндпоинты для AJAX/интеграций (`CartApiController`, `CosmeticItemApiController`, `OrderApiController`, и т.п.)
     - Разделение интерфейсов по ролям (страницы администратора, менеджера, склада, пользователя)

2. **Сервисный слой (Business logic)**
   - Пакет: `com.example.demo.service`
   - Ответственность:
     - Бизнес-логика работы с товарами, корзиной, заказами, пользователями, логами
     - Валидация входных данных (на уровне сервиса)
     - Аудит действий пользователей (`AuditLogService`)

3. **Доступ к данным (Repository + Model)**
   - Пакеты:
     - `com.example.demo.model` — сущности JPA/DTO/формы
     - `com.example.demo.repository` — интерфейсы `Repository`
   - Ответственность:
     - Отображение таблиц БД на сущности (Users, Roles, Cosmetic_items, Orders, Order_status, Cart, Cart_items, Comments, Favourites, Logs и др.)
     - Запросы к БД через Spring Data JPA (в т.ч. кастомные JPQL/Native-запросы)

4. **Инфраструктура и конфигурация**
   - Пакет: `com.example.demo.Config`
     - `ConfigSecrurity` — конфигурация Spring Security, доступ к URL по ролям, настройка формы логина
     - `UserDetailsConfig` — интеграция с `UserDetailsService`, поиск пользователей в БД
     - `WebConfig` — дополнительные настройки MVC (локаль, ресурсы и т.п.)
   - Главный класс: `KurshaxApplication` — точка входа в приложение (`main`).

---

## Роли и права доступа

В системе предусмотрена ролевая модель на основе таблицы `roles` и сущности `User`:

- **Гость (неавторизованный пользователь)**
  - Просмотр каталога товаров
  - Регистрация и авторизация
  - Восстановление пароля

- **Пользователь (клиент интернет-магазина)**
  - Просмотр каталога и карточек товара
  - Добавление в корзину, оформление заказа
  - Управление избранным
  - Оставление комментариев/отзывов (при выполнении условий)

- **Менеджер (управление ассортиментом)**
  - Доступ к менеджерской странице (`ManagerPageController`)
  - Создание, редактирование и деактивация товаров
  - Управление категориями, брендами, производителями, акциями
  - Просмотр аналитики по товарам и заказам (если предусмотрено)

- **Сотрудник склада (Set / складской модуль)**
  - Доступ к странице склада (`SetController`)
  - Подтверждение заявок на пополнение
  - Учет остатков, проведение операций пополнения/списания

- **Администратор**
  - Доступ к админ-панели (`AdminPageContoller`)
  - Управление пользователями и ролями
  - Просмотр логов (`LogsRepository`, `AuditLogService`)
  - Доступ к отчетам (`ReportsController`), расширенной аналитике

Конкретные названия и коды ролей хранятся в таблице `roles` и используются в настройках Spring Security.

---

## Запуск локально

### Требования

- **Java 17+**
- **Maven 3.8+**
- **PostgreSQL 14+**
- Настроенный пользователь БД (по умолчанию в `application.properties`):

```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/DBForKurs2
spring.datasource.username=postgres
spring.datasource.password=1
spring.jpa.hibernate.ddl-auto=update
